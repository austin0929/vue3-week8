import{_ as g,c as r,e as m,b as t,F as c,r as a,t as s,w as x,h as y,i as f,o as d}from"./index-BOfdHV1z.js";var v={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"david777",BASE_URL:"/vue3-week8",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_URL:h,VITE_APP_PATH:_}=v,b={data(){return{order:{},isLoading:!1}},methods:{getOrder(){this.isLoading=!0;const l=this.$route.params.id,i=`${h}/api/${_}/order/${l}`;this.$http.get(i).then(n=>{n.data.success&&(this.isLoading=!1,this.order=n.data.order)}).catch(n=>{this.$swal("讀取失敗","無法渲染","error")})},payOrder(l){this.isLoading=!0;const i=`${h}/api/${_}/pay/${l}`;this.$http.post(i).then(n=>{n.data.success&&(this.isLoading=!1,this.getOrder(),this.$router.push("/checkoutDone"))}).catch(n=>{this.$swal("付款失敗","請確認付款資訊","error")})}},mounted(){this.getOrder()}},w={class:"container mt-7 noto-sans"},L={class:"row justify-content-center"},k={class:"col-md-8"},P=t("div",{class:"d-flex justify-content-around mb-4"},[t("span",{class:"border h4 px-lg-6 px-3 py-4 bg-primary text-light"},"訂單資料"),t("span",{class:"border h4 px-lg-6 px-3 py-4 border-primary"},"付款確認"),t("span",{class:"border h4 px-lg-6 px-3 py-4 bg-primary text-light"},"完成訂單")],-1),V={class:"row justify-content-center"},T={class:"col-md-8"},E={class:"table"},O=t("thead",null,[t("tr",null,[t("th",{width:"250"},"產品"),t("th",{width:"200"},"原價"),t("th",{width:"200"},"售價"),t("th",{width:"200",class:"text-end"},"數量")])],-1),$=t("td",{class:"text-end"},"4",-1),A=t("td",{colspan:"3",class:"text-end"},"總計",-1),N={class:"text-end"},D=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),I={class:"text-end text-success"},R=t("h2",{class:"h3"},"訂購人資料",-1),B={class:"table"},C=t("th",{width:"130"},"姓名",-1),S=t("th",{width:"130"},"Email",-1),U=t("th",{width:"130"},"電話",-1),j=t("th",{width:"130"},"地址",-1),F=t("th",{width:"130"},"備註",-1),H=t("th",{width:"130"},"付款狀態",-1),M={key:0,class:"text-success"},q={key:1,class:"text-danger"},z={class:"text-end my-4"};function G(l,i,n,J,e,u){const p=f("VueLoading");return d(),r(c,null,[m(p,{active:e.isLoading},null,8,["active"]),t("div",w,[t("div",L,[t("div",k,[P,t("div",V,[t("div",T,[t("table",E,[O,t("tbody",null,[(d(!0),r(c,null,a(e.order.products,o=>(d(),r("tr",{key:o.id},[t("td",null,s(o.product.title),1),t("td",null,"NT$ "+s(o.product.origin_price),1),t("td",null,"NT$ "+s(o.product.price),1),$]))),128))]),t("tfoot",null,[(d(!0),r(c,null,a(e.order.products,o=>(d(),r("tr",{key:o},[A,t("td",N,"NT$ "+s(o.total),1)]))),128)),t("tr",null,[D,t("td",I,"NT$ "+s(e.order.total),1)])])]),t("div",null,[R,e.order.user?(d(),r(c,{key:0},[t("table",B,[t("tbody",null,[t("tr",null,[C,t("td",null,s(e.order.user.name),1)]),t("tr",null,[S,t("td",null,s(e.order.user.email),1)]),t("tr",null,[U,t("td",null,s(e.order.user.tel),1)]),t("tr",null,[j,t("td",null,s(e.order.user.address),1)]),t("tr",null,[F,t("td",null,s(e.order.message),1)]),t("tr",null,[H,e.order.is_paid?(d(),r("td",M,"已付款")):(d(),r("td",q,"未付款"))])])]),t("div",z,[t("button",{class:"btn btn-primary btn-primary-hover border-0 text-end",onClick:i[0]||(i[0]=x(o=>u.payOrder(e.order.id),["prevent"]))}," 確認付款 ")])],64)):y("",!0)])])])])])])],64)}const Q=g(b,[["render",G]]);export{Q as default};
